# websocket 和 http 有什么联系?有什么不同?

1. 共同点:都是基于tcp的   
2. ws 依赖于 http       
ws 的建立或者说握手,首先发一个http(我见过的都是get)   
这个请求带有字段   
upgrade: websocket   
connection :upgrade    
表明要建立一个长连接, 长连接方式是ws   
同时还会有字段   
sec-ws-key 一个客户端随机生成的字符串(用来表明身份)   
ws-v 版本   
如果服务器愿意建立这个ws   
这个http请求的响应头会返回给请求端   
sec-ws-accept: 内容是个key (鉴权用的)   
其他则是 版本 字符之类的东西   



3. 差异
 - ws 服务端能主动发信息, http只能被动的轮询,或者说 ws是双向的,http是单向的.
 - ws 适应实时性更高,通信更频繁的通信.
 - 因为ws 是可以服务端主动发起的,所以服务端可以控制 ws发出的顺序
 - 以上差异都是因为 二者 tcp 层面机制不同,导致的网络通信开销不同造成的(深问的话就从tcp层面继续答)
 - http 有缓存协商机制 ws 没有  (因为ws的特点,没必要协议层面考虑缓存问题)

-------------------------------------
4. toDo 
  - 往tcp方向深了问怎么答
  - websocket 你答完了,你知道啥事socket 嘛?  为什么都叫socket?
